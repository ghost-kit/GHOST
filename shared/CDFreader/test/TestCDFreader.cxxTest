#ifndef TESTCDFREADER_H
#define TESTCDFREADER_H

#include "CDFreader.h"
#include "String"
#include <QString>
#include "CDFglobalDefs.h"


using namespace std;

#define testFile "STA_L1_MAGB_RTN-20100101T000000Z-20100102T000000Z.cdf"

class TestCDFreader : public CxxTest::TestSuite
{
public:

    void testCDFreaderConstruction(void)
    {
        //make the cdfDataReader object
        CDFr::CDFreader *reader = new CDFr::CDFreader(testFile);

        //check that it opened
        TS_TRACE("Testing Object Construction");
        TS_ASSERT(!reader->hasError());

        //check that the loaded data is correct...
        TS_ASSERT_EQUALS(reader->getFormat(), CDFr_SINGLE_FILE);
        TS_ASSERT_EQUALS(reader->getEncoding(), CDFr_NETWORK_ENCODING);
        TS_ASSERT_EQUALS(reader->getNumberVariables(), 5);
        TS_ASSERT_EQUALS(reader->getNumberGlobalAttributes(), 22);
        TS_ASSERT_EQUALS(reader->getCompressionType(), CDFr_NO_COMPRESSION);
        TS_ASSERT_EQUALS(reader->getChecksum(), CDFr_NO_CHECKSUM);


        //check variabls
        TS_ASSERT(reader->variableExists(QString("Epoch")));
        TS_ASSERT(reader->variableExists(QString("BFIELD")));
        TS_ASSERT(reader->variableExists(QString("MAGFLAGUC")));
        TS_ASSERT(reader->variableExists(QString("CART_LABL_1")));
        TS_ASSERT(reader->variableExists(QString("metavar0")));

        //check variable attribute
        TS_ASSERT_EQUALS(reader->getVariable(QString("Epoch"))->getNumberAtts(), 11);
        TS_ASSERT_EQUALS(reader->getVariable(QString("BFIELD"))->getNumberAtts(), 14);
        TS_ASSERT_EQUALS(reader->getVariable(QString("MAGFLAGUC"))->getNumberAtts(), 12);
        TS_ASSERT_EQUALS(reader->getVariable(QString("CART_LABL_1"))->getNumberAtts(), 6);
        TS_ASSERT_EQUALS(reader->getVariable(QString("metavar0"))->getNumberAtts(), 4);

    }






};

#endif // TESTCDFREADER_H
